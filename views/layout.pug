doctype html
html(class="h-full bg-white dark:bg-zinc-900" id="html")
  head
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    title= title || 'My Blog'
    link(rel='stylesheet' href='/stylesheets/style.css')
    script.
      // Check for saved theme preference, otherwise use system preference
      if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    block head
  
  body(class="min-h-screen bg-white dark:bg-zinc-900")
    header(class="bg-white dark:bg-zinc-800 shadow")
      nav(class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8")
        div(class="flex h-16 justify-between items-center")
          a(href='/' class="text-xl font-bold text-gray-900 dark:text-white") My Blog
          div(class="flex items-center space-x-6")
            ul(class="flex space-x-4")
              li
                a(href='/' class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white") Home
              li
                a(href='/posts' class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white") All Posts
              li
                a(href='/about' class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white") About
            
            // Theme Toggle Button
            button#themeToggle(class="p-2 rounded-lg bg-gray-100 dark:bg-zinc-700 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500")
              span(class="sr-only") Toggle theme
              // Sun icon
              svg.sun-icon(xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z")
              // Moon icon
              svg.moon-icon(xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z")
    
    main(class="bg-white dark:bg-zinc-900")
      div(class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6")
        block content
    
    footer(class="bg-white dark:bg-zinc-800 mt-auto")
      div(class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 text-center text-gray-600 dark:text-gray-300")
        p &copy; #{new Date().getFullYear()} My Blog. All rights reserved.

    if env === 'development'
      script(src='/javascripts/dev.js')
    
    script.
      const themeToggle = document.getElementById('themeToggle');
      themeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
      });